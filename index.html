<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1" />
    <title>Primary — Générateur de thème (UI)</title>
    <link
      rel="stylesheet"
      href="assets/css/app.css" />
    <meta
      name="description"
      content="Générateur de theme.css, primitives.json, tokens.json et theme.json à partir d'exports Mode JSON Figma" />
  </head>
  <body>
    <header
      class="app-header"
      role="banner">
      <div
        class="container"
        data-layout="duo"
        data-gap="m">
        <h1 class="app-title">Primary — Générateur de thème</h1>
        <nav
          aria-label="Actions"
          data-layout="cluster"
          data-gap="s">
          <!-- Téléchargement et réinitialisation supprimés : utilisation du bouton Copier dans chaque aperçu -->
        </nav>
      </div>
    </header>

    <main
      class="app-main"
      role="main">
      <section
        class="uploader"
        aria-labelledby="uploader-title"
        data-layout="stack"
        data-gap="m">
        <h2
          id="uploader-title"
          class="visually-hidden">
          Importer vos fichiers Mode JSON
        </h2>

        <div
          id="dropzone"
          class="dropzone"
          role="region"
          aria-label="Zone de dépôt"
          tabindex="0">
          <input
            id="file-input"
            type="file"
            accept="application/json"
            multiple
            aria-label="Sélectionnez des fichiers JSON" />
          <div
            class="dropzone-visual"
            aria-hidden="true">
            <div
              class="drop-illustration"
              aria-hidden="true">
              <!-- decorative -->
            </div>
            <p class="drop-title">Importer un ou plusieurs fichiers JSON</p>
            <p class="drop-sub">ou glisser et déposer</p>
          </div>
        </div>

        <div
          class="uploader-hint visually-hidden"
          id="uploader-hint">
          Glisser un ou plusieurs fichiers JSON exportés depuis Figma ici.
        </div>

        <div
          class="uploader-actions-top"
          data-layout="cluster"
          data-gap="s">
          <button
            id="btn-empty-project"
            class="btn btn-secondary"
            type="button"
            aria-label="Générer un projet vide">
            Projet vide (sans JSON)
          </button>
        </div>

        <div
          class="uploader-actions"
          data-layout="cluster"
          data-gap="s">
          <label class="log-debug generate-themejson-uploader">
            <input
              id="generate-themejson-toggle"
              type="checkbox"
              aria-label="Générer theme.json (projet WordPress)"
              title="Génère et affiche un fichier theme.json compatible WordPress (si coché)" />
            <span>Générer theme.json (projet WordPress)</span>
          </label>
        </div>
      </section>

      <section
        class="generation"
        aria-labelledby="generation-title"
        data-layout="stack"
        data-gap="m">
        <h2
          id="generation-title"
          class="visually-hidden">
          Synthèse
        </h2>
        <div
          id="generation-summary"
          class="generation-summary"
          aria-live="polite">
          <ul
            id="generation-summary-list"
            class="generation-summary-list"
            aria-hidden="false"></ul>
        </div>
      </section>

      <section
        class="results"
        aria-labelledby="results-title"
        data-layout="stack"
        data-gap="m">
        <h2 id="results-title">Résultats</h2>

        <div
          class="previews"
          data-layout="switcher"
          data-gap="m">
          <div
            class="preview"
            data-layout="stack">
            <h3>Preview — theme.css</h3>
            <!-- Bouton Copier accessible en superposition -->
            <button
              class="copy-btn"
              type="button"
              data-target="preview-themecss"
              aria-label="Copier le CSS"
              title="Copier le contenu">
              Copier
            </button>
            <pre
              id="preview-themecss"
              class="code-preview"
              tabindex="0"></pre>
          </div>

          <div
            id="panel-preview-themejson"
            class="preview themejson-preview"
            data-layout="stack">
            <h3>Preview — theme.json</h3>
            <!-- Bouton Copier accessible en superposition -->
            <button
              class="copy-btn"
              type="button"
              data-target="preview-themejson"
              aria-label="Copier le JSON"
              title="Copier le contenu">
              Copier
            </button>
            <pre
              id="preview-themejson"
              class="code-preview"
              tabindex="0"></pre>
          </div>
        </div>

        <!-- Removed duplicate generated files panel: entries are now presented inside the generation summary above -->

        <div
          class="results-controls"
          aria-hidden="false">
          <label class="log-debug debug-toggle-main">
            <input
              id="debug-toggle"
              type="checkbox"
              aria-label="Afficher les logs techniques" />
            <span>Debug</span>
          </label>
        </div>

        <!-- Region ARIA pour annoncer l'état de la copie au lecteur d'écran -->
        <div
          id="copy-status"
          class="visually-hidden"
          role="status"
          aria-live="polite"></div>

        <div
          class="logs"
          aria-live="polite"
          aria-atomic="true">
          <div
            class="log-controls"
            role="toolbar"
            aria-label="Log controls">
            <h3>Logs techniques</h3>
          </div>
          <pre
            id="log-output"
            class="log-output"
            tabindex="0"></pre>
        </div>
      </section>
    </main>

    <footer
      class="app-footer"
      role="contentinfo">
      <p>Primary — UI pour l'extracteur Figma — Déployé sur GH Pages</p>
    </footer>

    <!-- App scripts -->
    <script
      type="module"
      src="assets/js/client-utils.mjs"></script>
    <script
      type="module"
      src="assets/js/app.js"></script>
  </body>
</html>
